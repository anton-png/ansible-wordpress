---
server_name: "194.58.90.166"
mysql_db: "wordpress"
mysql_user: "wordpress"
mysql_password: "Ghi~36vhy$#jkbCV"

nginx_vhosts:
  - listen: "80"
    server_name: "{{ server_name }}"
    root: "/var/www/{{ server_name }}/wordpress"
    index: "index.php index.html index.htm"
    filename: "{{ server_name }}-80.conf"
    server_name_redirect: "www.{{ server_name }}"
    state: "present"
    template: "{{ nginx_vhost_template }}"
    extra_parameters: |
      location ~ \.php$ {
          fastcgi_split_path_info ^(.+?\.php)(/.*)$;
          if (!-f $document_root$fastcgi_script_name) {
              return 404;
          }
          include fastcgi_params;
          fastcgi_param  SCRIPT_FILENAME   $document_root$fastcgi_script_name;
          fastcgi_pass 127.0.0.1:9000;
       } 


#      location ~ \.php$ {
#        fastcgi_split_path_info ^(.+\.php)(/.+)$;
#        fastcgi_pass 127.0.0.1:9000;
#        fastcgi_index index.php;
#        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
#        include fastcgi_params;
#      }
#
#      location ~ \.php$ {
#        include snippets/fastcgi-php.conf;
#        fastcgi_pass unix:/run/php/php7.0-fpm.sock;
#      }
#   # Properties that are only added if defined:
#   server_name_redirect: "www.example.com" # default: N/A
#   error_page: ""
#   access_log: ""
#   error_log: ""
#   extra_parameters: "" # Can be used to add extra config blocks (multiline).
#   template: "" # Can be used to override the `nginx_vhost_template` per host.
#   state: "absent" # To remove the vhost configuration.

mysql_databases:
  - name: "{{ mysql_db }}"
    encoding: utf8
    collation: utf8_general_ci

mysql_users:
  - name: "{{ mysql_user }}"
    host: "%"
    password: "{{ mysql_password }}"
    priv: "wordpress.*:ALL"
